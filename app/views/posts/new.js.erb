// This will inject HTML code to render the shared post modal, with a new local for the post from
// the show action in posts_controller.rb -- Note that this is overriding the local from the
// views/pages/home.html.erb that was the very first post from the pages_controller.rb home action
console.log('new post');
$('.showme').html("<%= escape_javascript(render partial: "shared/newpost", locals: {post: @post} ) %>");
hideModal('getpostmodal');
// Will activate the showModal function in the assets/javascript/getpostmodal.js
showModal('newpostmodal');


var lastInputStrLength = 0;
var htmlStr = '';
var numOfQuestions = 1;
var interviewQuestionId = '#interview-question' + numOfQuestions;


$(interviewQuestionId).on("keyup", function(e) {
        var inputStr = $(this).val();
        if (event.keyCode == 8 || event.keyCode == 46) {
            inputStr = $(this).val();
        }
        lastInputStrLength = inputStr.length
        if(lastInputStrLength > 0){
            $('#add-question-button').css('color', '#53575A');

        }
        else{
            $('#add-question-button').css('color', '#D3D3D3');
        }
});

$('#add-question-button').hover(function(e){
    if(lastInputStrLength > 0){
        $('#add-question-button').css('cursor', 'pointer');
    }
})

$('#add-question-button').click( function(e){
    if(lastInputStrLength > 0){
        numOfQuestions += 1;
        htmlStr = "<div class='light-modal-line-divider'></div><textarea style='margin-top: 15px;' class='modal-input modal-input-medium-description' id='interview-question" + numOfQuestions + "' placeholder='Enter one relevant interview question at a time.'></textarea>";
        $('#cached-questions').append(htmlStr);
    }
})